var Subaru=Subaru||{};
Subaru.Utils=Subaru.Utils||{};
Subaru.Utils.UsStates={usStates:[{stateAbbrev:"AL",stateName:"Alabama",stateCapital:"Montgomery"},{stateAbbrev:"AK",stateName:"Alaska",stateCapital:"Juneau"},{stateAbbrev:"AZ",stateName:"Arizona",stateCapital:"Phoenix"},{stateAbbrev:"AR",stateName:"Arkansas",stateCapital:"Little Rock"},{stateAbbrev:"CA",stateName:"California",stateCapital:"Sacramento"},{stateAbbrev:"CO",stateName:"Colorado",stateCapital:"Denver"},{stateAbbrev:"CT",stateName:"Connecticut",stateCapital:"Hartford"},{stateAbbrev:"DE",stateName:"Delaware",stateCapital:"Dover"},{stateAbbrev:"DC",stateName:"District of Columbia"},{stateAbbrev:"FL",stateName:"Florida",stateCapital:"Tallahassee"},{stateAbbrev:"GA",stateName:"Georgia",stateCapital:"Atlanta"},{stateAbbrev:"HI",stateName:"Hawaii",stateCapital:"Honolulu"},{stateAbbrev:"ID",stateName:"Idaho",stateCapital:"Boise"},{stateAbbrev:"IL",stateName:"Illinois",stateCapital:"Springfield"},{stateAbbrev:"IN",stateName:"Indiana",stateCapital:"Indianapolis"},{stateAbbrev:"IA",stateName:"Iowa",stateCapital:"Des Moines"},{stateAbbrev:"KS",stateName:"Kansas",stateCapital:"Topeka"},{stateAbbrev:"KY",stateName:"Kentucky",stateCapital:"Frankfort"},{stateAbbrev:"LA",stateName:"Louisiana",stateCapital:"Baton Rouge"},{stateAbbrev:"ME",stateName:"Maine",stateCapital:"Augusta"},{stateAbbrev:"MD",stateName:"Maryland",stateCapital:"Annapolis"},{stateAbbrev:"MA",stateName:"Massachusetts",stateCapital:"Boston"},{stateAbbrev:"MI",stateName:"Michigan",stateCapital:"Lansing"},{stateAbbrev:"MN",stateName:"Minnesota",stateCapital:"Minneapolis"},{stateAbbrev:"MS",stateName:"Mississippi",stateCapital:"Jackson"},{stateAbbrev:"MO",stateName:"Missouri",stateCapital:"Jefferson City"},{stateAbbrev:"MT",stateName:"Montana",stateCapital:"Helena"},{stateAbbrev:"NE",stateName:"Nebraska",stateCapital:"Lincoln"},{stateAbbrev:"NV",stateName:"Nevada",stateCapital:"Carson City"},{stateAbbrev:"NH",stateName:"New Hampshire",stateCapital:"Concord"},{stateAbbrev:"NJ",stateName:"New Jersey",stateCapital:"Trenton"},{stateAbbrev:"NM",stateName:"New Mexico",stateCapital:"Sante Fe"},{stateAbbrev:"NY",stateName:"New York",stateCapital:"Albany"},{stateAbbrev:"NC",stateName:"North Carolina",stateCapital:"Raleigh"},{stateAbbrev:"ND",stateName:"North Dakota",stateCapital:"Bismarck"},{stateAbbrev:"OH",stateName:"Ohio",stateCapital:"Columbus"},{stateAbbrev:"OK",stateName:"Oklahoma",stateCapital:"Oklahoma City"},{stateAbbrev:"OR",stateName:"Oregon",stateCapital:"Salem"},{stateAbbrev:"PA",stateName:"Pennsylvania",stateCapital:"Harrisburg"},{stateAbbrev:"RI",stateName:"Rhode Island",stateCapital:"Providence"},{stateAbbrev:"SC",stateName:"South Carolina",stateCapital:"Columbia"},{stateAbbrev:"SD",stateName:"South Dakota",stateCapital:"Pierre"},{stateAbbrev:"TN",stateName:"Tennessee",stateCapital:"Nashville"},{stateAbbrev:"TX",stateName:"Texas",stateCapital:"Austin"},{stateAbbrev:"UT",stateName:"Utah",stateCapital:"Salt Lake City"},{stateAbbrev:"VT",stateName:"Vermont",stateCapital:"Montpelier"},{stateAbbrev:"VA",stateName:"Virginia",stateCapital:"Richmond"},{stateAbbrev:"WA",stateName:"Washington",stateCapital:"Olympia"},{stateAbbrev:"WV",stateName:"West Virginia",stateCapital:"Charleston"},{stateAbbrev:"WI",stateName:"Wisconsin",stateCapital:"Madison"},{stateAbbrev:"WY",stateName:"Wyoming",stateCapital:"Cheyenne"}],getAllStates:function(){return this.usStates
},getStateByAbbrev:function(b){var c="";
for(var a=0;
a<this.usStates.length;
a++){if(this.usStates[a].stateAbbrev===b){c=this.usStates[a].stateName;
break
}}return c
},getAbbrevByState:function(d){var a="";
var c=d.replace(/(^[\s]+|[\s]+$)/,"");
for(var b=0;
b<this.usStates.length;
b++){if(this.usStates[b].stateName===c){a=this.usStates[b].stateAbbrev;
break
}}return a
},getCapitalByState:function(b){var c="";
var a=b.replace(/(^[\s]+|[\s]+$)/,"");
for(var d=0;
d<this.usStates.length;
d++){if(this.usStates[d].stateName===a){c=this.usStates[d].stateCapital;
break
}}return c
},isValidState:function(d){var c=false;
var b=d.replace(/(^[\s]+|[\s]+$)/,"");
for(var a=0;
a<this.usStates.length;
a++){if(b===this.usStates[a].stateName){c=true;
break
}}return c
},createStateOptions:function(e,d){var c="";
var b=this.getAllStates();
if(e===undefined){e=""
}if(d===undefined){d="Select a State"
}c="<option value=''>"+d+"</option>";
for(var a=0;
a<b.length;
a++){if(e==b[a].stateAbbrev){c+="<option selected='selected' value='"+b[a].stateAbbrev+"'>"+b[a].stateName+"</option>"
}else{c+="<option value='"+b[a].stateAbbrev+"'>"+b[a].stateName+"</option>"
}}return c
}};
Subaru.Utils.Variables={years:[2016,2015,2014,2013,2012,2011,2010]};
Subaru.Utils.Browser={isIpad:function(){return navigator.userAgent.match(/iPad/i)!=null
},isAndroid:function(){return navigator.userAgent.match(/Android/i)!=null
},isIphone:function(){return navigator.userAgent.match(/IPhone/i)!=null
},isMobileWebkit:function(){return Subaru.Utils.Browser.isAndroid()||Subaru.Utils.Browser.isIphone()
},isInternetExplorer:function(){var c=window.navigator.userAgent,b=c.indexOf("MSIE "),a=c.indexOf("Trident/"),d=c.indexOf("Edge/");
if(b>0){return parseInt(c.substring(b+5,c.indexOf(".",b)),10)
}if(a>0){var e=c.indexOf("rv:");
return parseInt(c.substring(e+3,c.indexOf(".",e)),10)
}if(d>0){return parseInt(c.substring(d+5,c.indexOf(".",d)),10)
}return false
}};
Subaru.Utils.Input={numeric:function(b,a){$("#"+b).on("keypress",function(c){if(a){return(!(c.which!=8&&c.which!=0&&c.which!=13&&(c.which<48||c.which>57)&&c.which!=46))
}else{return(!(c.which!=8&&c.which!=0&&c.which!=13&&(c.which<48||c.which>57)))
}})
},isNumeric:function(c){var b=c.which||c.keyCode||c.charCode;
var a;
if(!isNaN(String.fromCharCode(b)*1)&&b!=9){a=true
}else{a=false
}return a
},avoidNumeric:function(a){$("#"+a).on("keypress",function(c){var b=c.which||c.keyCode||c.charCode;
return(!(!isNaN(String.fromCharCode(b))&&b!=9))
})
},allowSomeSpecialCharacters:function(a){$("#"+a).on("keypress",function(d){d=d||window.event;
var c=d.which||d.keyCode||d.charCode;
var b=null;
if(Subaru.Utils.Browser.isIpad()||d.shiftKey){b=((c>7&&c<21)||c==27||c==32||c==45||c==46||(c>=64&&c<91)||c==95||(c>96&&c<123))
}else{b=((c>7&&c<21)||c==27||c==32||(c>33&&c<41)||c==45||c==46||(c>=64&&c<91)||c==95||(c>=97&&c<123))
}return b
})
},allowSomeSpecialCharactersForEmail:function(a){$("#"+a).on("keypress",function(d){d=d||window.event;
var c=d.which||d.keyCode||d.charCode;
var b=null;
if(Subaru.Utils.Browser.isIpad()){b=((c>7&&c<21)||c==27||c==45||c==46||(c>=48&&c<=57)||(c>=64&&c<91)||(c>=95&&c<123))
}else{if(d.shiftKey){b=((c>7&&c<21)||c==27||c==45||c==46||(c>=64&&c<91)||c==95||(c>96&&c<123))
}else{b=((c>7&&c<21)||c==27||(c>32&&c<41)||c==45||c==46||(c>=48&&c<=57)||(c>=64&&c<91)||(c>=95&&c<123))
}}return b
})
},avoidSpecialCharacters:function(a){$("#"+a).on("keypress",function(c){var b=c.which||c.keyCode||c.charCode;
return((b>64&&b<91)||(b>96&&b<123)||b==8||b==32||(b>=48&&b<=57))
})
},avoidNumbersAndSpecialChars:function(b){var a=/\d/;
$("#"+b).on("keypress",function(f){var d=f.which||f.keyCode||f.charCode;
var g=a.test(String.fromCharCode(d));
var c=(d>64&&d<91)||(d>96&&d<123)||d==8||d==32||(d>=48&&d<=57);
if(g||!c){return false
}})
},createErrorMessage:function(a,c,b){Subaru.Utils.Input.deleteErrorMessage(a);
if(Subaru.Utils.Validation.isEmpty(b)){b="This field cannot be left blank."
}$("#"+a).errorMessage({containerId:a,messageMain:c,messageTop:b})
},deleteErrorMessage:function(a){$("#error_"+a+", div.errorClear").remove();
$("#"+a).removeClass("errorFocus")
},checkNameFormat:function(b){var a=$("#"+b);
if(a.length===1){a.off("keydown.checkNameFormat").on("keydown.checkNameFormat",function(g){var c=false,f=g.which,d=[46,8,9,27,13,37,39,36,35,16,32];
if($.inArray(f,d)>-1){c=true
}else{if(f>=65&&f<=90){c=true
}else{if(f===109||f===189||(f>=48&&f<=57)||(f>=96&&f<=105)){c=!g.shiftKey
}}}if(c===false){g.preventDefault()
}})
}},checkCopyOrPaste:function(b){var a=$("#"+b);
if(a.length===1){a.off("keydown.checkCopyOrPaste").on("keydown.checkCopyOrPaste",function(f){var c=true,d=f.which;
if(d>=65&&d<=90){if(((f.ctrlKey===true)||(f.metaKey===true))&&(d===86||d===67)){c=false
}}if(c===false){f.preventDefault()
}});
$(document).off("contextmenu.rightClick_"+b).on("contextmenu.rightClick_"+b,function(c){if(c.target&&c.target.id===b){c.preventDefault()
}})
}},checkEmailFormat:function(c,b){var a=$("#"+c);
if(a.length===1){a.off("keydown.checkNameFormat").on("keydown.checkNameFormat",function(h){var d=false,g=h.which,f=[46,8,9,27,13,37,39,36,35,16,32];
if($.inArray(g,f)>-1){d=true
}else{if(g>=65&&g<=90){if(typeof(b)!=="undefined"&&b===false){if(((h.ctrlKey===false)&&(h.metaKey===false))||(g!==86&&g!==67)){d=true
}}else{d=true
}}else{if(h.shiftKey===true){if(g===50||g===189){d=true
}}else{if(g===109||g===189||g===110||g===190||(g>=48&&g<=57)||(g>=96&&g<=105)){d=true
}}}}if(d===false){h.preventDefault()
}});
if(b===false){$(document).off("contextmenu.rightClick_"+c).on("contextmenu.rightClick_"+c,function(d){if(d.target&&d.target.id===c){d.preventDefault()
}})
}}},keepNumbersOnlyAfterPaste:function(b){var a=$("#"+b);
if(a.length===1){a.off("paste.keepNumbersOnlyAfterPaste").on("paste.keepNumbersOnlyAfterPaste",function(c){var d=a.attr("maxlength");
if(typeof(d)!=="undefined"&&d>0){a.attr("maxlength",(d*2))
}a.one("keyup.keepNumbersOnlyAfterPaste",function(){var e=this.value;
if(e!==""){e=e.replace(/[^0-9]/g,"");
if(this.value!==e){if(typeof(d)!=="undefined"&&d>0&&e.length>d){e=e.substring(0,d)
}this.value=e
}}if(typeof(d)!=="undefined"&&d>0){a.attr("maxlength",d)
}});
window.setTimeout(function(){a.keyup()
},100)
})
}}};
Subaru.Utils.Validation={HAWAII_ZIP_CODE_BEGIN:96700,HAWAII_ZIP_CODE_END:96899,isValidZipcode:function(a){var b=false;
if(/\d{5}-\d{4}$|^\d{5}$/.test(a)){$.ajax({type:"GET",url:"/services/utility/geographicdata?zipcode="+a,cache:false,async:false,statusCode:{200:function(){b=true
}}})
}return b
},validZipcodeStates:function(b){var c="invalid";
var a=b.length;
if(/\d{5}-\d{4}$|^\d{5}$/.test(b)){$.ajax({type:"POST",url:"/bin/reverse-proxy",data:{homeZip:zipcode,"target-url":Subaru.webServiceDomain+"/form/user/getgeographicinfo"},cache:false,async:false,statusCode:{200:function(){c="valid"
}}})
}else{if(a==5||(a<5&&!(/^[0-9\s'-]*$/.test(b)))){c="invalid"
}else{if(a<5){c="less-digits"
}}}return c
},isValidEmail:function(a){a=a.toUpperCase();
var b=/^[A-Z0-9._+-]+@[A-Z0-9.-]+[.]+[A-Z]{2,4}$/;
return b.test(a)
},validateEmail:function(b,a){var e=Subaru.Utils.Validation.isValidEmail(a);
if(e){Subaru.Utils.Input.deleteErrorMessage(b)
}else{var d;
var c;
if(a.length==0){d="default";
c="Please enter your email address."
}else{d="The email you entered is not valid.";
c="Please enter a valid email address."
}Subaru.Utils.Input.createErrorMessage(b,d,c)
}return e
},isValidEmailList:function(c){if(this.isEmpty(c)){return false
}var b=$.map(c.split(","),$.trim);
for(var a=0;
a<b.length;
a++){if(!this.isValidEmail(b[a])){return false
}}return true
},isBlank:function(a){return !!((a&&a.replace(/^\s\s*/,"").replace(/\s\s*$/,""))=="")
},isEmpty:function(a){return(a==null||a==undefined||Subaru.Utils.Validation.isBlank(a))
},isDigit:function(a){return !!((/^\d+$/.test(a)))
},isValidMileage:function(a){if(!Subaru.Utils.Validation.isDigit(a)){return false
}return(a>=900000)?false:(a>0)
},isHawaiianZipCode:function(a){return !!(a>=Subaru.Utils.Validation.HAWAII_ZIP_CODE_BEGIN&&a<=Subaru.Utils.Validation.HAWAII_ZIP_CODE_END)
},isDate:function(g){var c=false;
var e=/^\d{1,2}\/\d{1,2}\/\d{4}$/;
if(e.test(g)){var f=g.split("/");
var h=parseInt(f[0],10);
var d=parseInt(f[1],10);
var a=parseInt(f[2],10);
var b=new Date(a,h-1,d);
c=!!(((b.getFullYear()==a)&&(b.getMonth()==h-1)&&(b.getDate()==d)))
}else{c=false
}return c
},isAlphaNumeric:function(a){return(a).match(/^[a-zA-Z0-9]+$/gi)
},isValidVin:function(a){if(this.isEmpty(a)||a.length!==17){return false
}a=String(a).toUpperCase();
var b=false;
$.ajax({type:"GET",url:"/services/utility/vindata?vin="+a,async:false,cache:false,statusCode:{200:function(){b=true
}}});
return b
},isValidPassword:function(a){var c=/^[A-Za-z0-9]{6,15}$/;
var b=new RegExp(c);
return a.match(b)?true:false
},isValidPasswordWithSpecialCharacters:function(a){var c=/^[A-Za-z0-9-&!%@_\-\.#\*]{6,40}$/;
var b=new RegExp(c);
return a.match(b)?true:false
}};
Subaru.Utils.Cookies={createCookie:function(c,d,e){var a="";
if(e){var b=new Date();
b.setTime(b.getTime()+(e*24*60*60*1000));
a="; expires="+b.toGMTString()
}document.cookie=c+"="+d+a+"; path=/"
},getCookie:function(b){var e=b+"=";
var a=document.cookie.split(";");
for(var d=0;
d<a.length;
d++){var f=a[d];
while(f.charAt(0)==" "){f=f.substring(1,f.length)
}if(f.indexOf(e)==0){return f.substring(e.length,f.length)
}}return null
},deleteCookie:function(a){Subaru.Utils.Cookies.createCookie(a,"",-1)
}};
Subaru.Utils.Format={formatNumber:function(b,e,g){e=e||"";
g=g||"";
b+="";
var d=b.split(".");
var a=d[0];
var c=d.length>1?"."+d[1]:"";
var f=/(\d+)(\d{3})/;
while(f.test(a)){a=a.replace(f,"$1,$2")
}return e+a+c+g
},unformatNumber:function(a){return a.replace(/([^0-9\.\-])/g,"")*1
},formatPhoneNumber:function(a){a=String(a);
return a.substring(0,3)+"-"+a.substring(3,6)+"-"+a.substring(6,10)
},formatPhoneNumberParentheses:function(a){a=String(a);
a=a.replace(/[^0-9]/g,"");
return a.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3")
},unformatPhoneNumber:function(a){return a.replace(/\D/gi,"")
},formatFullDate:function(g){var a=g.split("T");
var j=a[0].split("-");
var d=j[1]+"/"+j[2]+"/"+j[0];
var k=a[1].split("-");
var c=k[0].substring(0,k[0].length-3);
var f=parseInt(c.split(":")[0]);
var e=c.split(":")[1];
var i="am";
if(f==0){f=12
}else{if(f>11){i="pm";
if(f>12){f=f-12
}}}var b=f+":"+e+i;
var h="EST";
return(d+" at "+b+" "+h)
}};
Subaru.Utils.URL={isSecure:function(){return window.location.protocol=="https:"
},getUrlVars:function(b){var e=[],d;
var a=b.slice(b.indexOf("?")+1).split("&");
for(var c=0;
c<a.length;
c++){d=a[c].split("=");
e.push(d[0]);
e[d[0]]=d[1]
}return e
},getUrlVar:function(a){return decodeURIComponent((new RegExp(a+"=(.+?)(&|$|#)").exec(window.location.search)||[,""])[1])
}};
Subaru.Utils.Enumeration={createEnum:function(c){var b=function(){};
b.prototype={_values:[],values:function(){return this._values
},ordinal:function(e){for(var d=0;
d<this._values.length;
d++){if(this._values[d]===e){return d
}}return -1
}};
for(var a in c){if(c.hasOwnProperty(a)){b.prototype[a]=c[a];
b.prototype._values.push(c[a])
}}return new b()
}};
Subaru.Utils.Request={ajaxType:Subaru.Utils.Enumeration.createEnum({GET:"GET",HEAD:"HEAD",POST:"POST"}),ajaxDataType:Subaru.Utils.Enumeration.createEnum({XML:"xml",HTML:"html",SCRIPT:"script",JSON:"json",JSONP:"jsonp",TEXT:"text"}),ajaxContentType:Subaru.Utils.Enumeration.createEnum({MULTIPART_FORM_DATA:"multipart/form-data",APP_FORM_URL_ENCODED:"application/x-www-form-urlencoded"}),ajax:function(a){var b={type:this.ajaxType.GET,url:"",async:true,contentType:this.ajaxContentType.APP_FORM_URL_ENCODED,data:""};
return $.ajax($.extend({},b,a))
}};
Subaru.Utils.Resource={getTrimDetail:function(c,b,d){var a="/"+(Subaru.Utils.URL.isSecure()?"secureform":"form")+"/vehicledata/trim/{0}/{1}/{2}";
return Subaru.Utils.Request.ajax({url:a.format(c,b,d),dataType:Subaru.Utils.Request.ajaxDataType.JSON})
},getTrimResource:function(d,c,f,e,b){var a=$.format("/services/vehicles/trim/resource/{0}/{1}/{2}/{3}/{4}");
return Subaru.Utils.Request.ajax({url:a(d,c,f,e,(b!==undefined)?b:""),dataType:Subaru.Utils.Request.ajaxDataType.JSON})
},getModelResource:function(c,b,d){var a="/"+(Subaru.Utils.URL.isSecure()?"secureform":"form")+"/vehicledata/model/resource/{0}/{1}/{2}";
return Subaru.Utils.Request.ajax({url:a.format(c,b,d),dataType:Subaru.Utils.Request.ajaxDataType.JSON})
},getYearsResource:function(){var a="/"+(Subaru.Utils.URL.isSecure()?"secureform":"form")+"/vehicledata/modelyears";
return Subaru.Utils.Request.ajax({url:a,dataType:Subaru.Utils.Request.ajaxDataType.JSON})
},getModelYearsResource:function(b){var a="/"+(Subaru.Utils.URL.isSecure()?"secureform":"form")+"/vehicledata/models/{0}";
return Subaru.Utils.Request.ajax({url:a.format(b),dataType:Subaru.Utils.Request.ajaxDataType.JSON})
},getModelTrimResource:function(b,c){var a="/"+(Subaru.Utils.URL.isSecure()?"secureform":"form")+"/vehicledata/trims/details/{0}/{1}";
return Subaru.Utils.Request.ajax({url:a.format(b,c),dataType:Subaru.Utils.Request.ajaxDataType.JSON})
}};
Subaru.Utils.Vehicles={codeArray:{brz:"BRZ",wrx:"WRX",impreza:"IMP",legacy:"LEG",forester:"FOR",crosstrek:"XV",outback:"OBK"},getCodeFromLink:function(b){var a="";
$.each(this.codeArray,function(c,d){if(b.match(c)){a=d
}});
return a
},getCodeFromName:function(a){a=a.toLowerCase().replace(" ","-");
return this.codeArray[a]
},getNameFromCode:function(b){var a="";
$.each(this.codeArray,function(c,d){if(b.toUpperCase()==d){a=c
}});
return a
},calculateMonthlyPayment:function(a,g,h,f,d){var i=12;
var k=a-g-h;
var c=f/(i*100);
var e=0;
var j;
if(c===0){e=k/d
}else{j=Math.pow(1+c,d);
e=((c*(k)*j)/(j-1))
}return e
}};
Subaru.Utils.Dealers={getDealerById:function(b,a){$.get("/services/dealers/by/id?id="+b).done(function(c){if($.isFunction(a)){a(c)
}})
}};
String.prototype.format=function(){var a=arguments;
return this.toString().replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b
})
};