window.$CQ=_g.$;
var Subaru=Subaru||{};
Subaru.Emergency=Subaru.Emergency||{};
Subaru.EmergencyManager=function(){var c=$(".simplemodal-close"),i=$("#emergency-overlay"),b=window.location.pathname;
var e=function(l){var m=l["cl:links"];
var k=false;
if(Array.isArray(m)){$.each(m,function(n,o){if(b.search(o)!=-1&&!k&&j(l["cl:onDate"],l["cl:onTime"],l["cl:offDate"],l["cl:offTime"])){f(l["cl:description"]);
k=true
}})
}else{if(m&&b.search(m)!=-1&&!k&&j(l["cl:onDate"],l["cl:onTime"],l["cl:offDate"],l["cl:offTime"])){f(l["cl:description"]);
k=true
}}};
if(!Array.isArray){Array.isArray=function(k){return Object.prototype.toString.call(k)==="[object Array]"
}
}var j=function(m,k,q,p){var l=false;
var u="EDT";
var w=m.split("/");
var t=q.split("/");
if(w.length===3&&t.length===3){var v=w[0]+"/"+w[1]+"/20"+w[2]+" "+k+" "+u;
var s=t[0]+"/"+t[1]+"/20"+t[2]+" "+p+" "+u;
var n=new Date();
var o=new Date(v);
var r=new Date(s);
if(o<n&&n<r){l=true
}}return l
};
var f=function(k){if(!h("emergency_alert")){d("emergency_alert",true);
a();
$("#emergency-alert-message").html(k);
$(".emergency_alert_wrapper").show();
g()
}};
var g=function(){c.on("click",function(){$(".emergency_alert_wrapper").hide()
});
i.on("click",function(){$(".emergency_alert_wrapper").hide()
});
$(window).on("resize",function(){a()
})
};
var a=function(){var l=$("body").hasClass("isTablet"),k=$("body").hasClass("mobile"),m=$("#emergency-container"),n="";
if(l){n=(($(document).outerWidth()-334)/2)+"px";
$(m).css("left",n)
}if(k){n=(($(document).outerWidth()-282)/2)+"px";
$(m).css("left",n)
}};
var d=function(m,n,o){var k="";
if(o){var l=new Date();
l.setTime(l.getTime()+(o*24*60*60*1000));
k="; expires="+l.toGMTString()
}document.cookie=m+"="+n+k+"; path=/"
};
var h=function(l){var n=l+"=";
var k=document.cookie.split(";");
for(var m=0;
m<k.length;
m++){var o=k[m];
while(o.charAt(0)==" "){o=o.substring(1,o.length)
}if(o.indexOf(n)==0){return o.substring(n.length,o.length)
}}return null
};
this.initialize=function(){$.get("content/subaru/en/emergency-alert/content/emergency_alert.infinity.json").done(function(k){if(k["cl:enabled"]){e(k)
}})
}
};
$(document).ready(function(){Subaru.Emergency.emergencyAlert=new Subaru.EmergencyManager();
Subaru.Emergency.emergencyAlert.initialize()
});