var Subaru=Subaru||{};
Subaru.legalShowHideHelper={};
Subaru.Disclaimer=function(a){var d=a;
var c=undefined;
var b=undefined;
this.setCopy=function(e){c=e
};
this.setPageId=function(e){b=e
};
this.getId=function(){return d
};
this.getCopy=function(){return c
};
this.getPageId=function(){return b
};
this.toString=function(){var e="Subaru.Disclaimer[id:{0}, copy:{1}, pageId:{2}]";
return e.format(this.getId(),this.getCopy(),this.getPageId())
};
this.serialize=function(){return"disclaimerId="+this.getId()
}
};
Subaru.Disclaimer.DisclaimerLoader=function(){var b=Subaru.disclaimers;
var a="/content/subaru/en/disclaimer.search.html";
this.loadGlobalDisclaimer=function(){var c="";
for(var d=0,e=b.length;
d<e;
d++){$.ajax({async:false,url:b[d],complete:function(f,g){c+=$(f.responseXML).find("body").text()
}})
}if(c!=undefined){return c
}};
this.loadSpecificDisclaimer=function(d){var c=undefined;
$.ajax({async:false,url:a,data:d.serialize(),complete:function(e,f){c=e.responseText
}});
if(c!=undefined){return c
}}
};
Subaru.Disclaimer.Manager=function(){var b=new Subaru.Disclaimer.DisclaimerLoader();
var g=new Subaru.Disclaimer.UIManager(this);
var f=new Object();
var d=0;
this.initialize=function(){g.initialize();
if(h()){e()
}a()
};
this.showGlobalDisclaimer=function(j){};
this.showSpecificDisclaimer=function(l){l.preventDefault();
var m=$(l.currentTarget).data("id");
if(typeof f[m]!="undefined"){if(typeof f[m].getCopy()=="undefined"){var k=f[m];
var j=b.loadSpecificDisclaimer(k);
k.setCopy(j)
}c(f[m].getCopy())
}else{var k=new Subaru.Disclaimer(m);
f[m]=k;
this.showSpecificDisclaimer(l)
}};
this.createDisclaimer=function(j){i(j)
};
this.createDisclaimerDynamically=function(k,j){var l=$(j).find(".disclaimer");
if(l.length){i(l)
}};
this.reset=function(){f=new Object();
d=0
};
var h=function(){if(window.location.href.match(".*\\b#ca\\b.*")){return true
}else{return false
}};
var e=function(){var k=$("#main-nav").height();
var j=$("body.main-nav-sticky").length>0?k:k+100;
var l=$("#california-policy").offset().top;
$("body, html").animate({scrollTop:l-j})
};
var a=function(){$(window).on("hashchange",function(){if(h()){e()
}});
$('a[href="/company/privacy.html#ca"]').on("click",function(j){e()
})
};
var i=function(j){$.each(j,function(){var m=$(this);
if($.trim(m.html())==""){var n=m.data("id");
if(f[n]==undefined){var l=new Subaru.Disclaimer(n);
var k=++d;
l.setPageId(k);
f[n]=l
}$(this).html("["+f[n].getPageId()+"]").wrap("<sup />")
}})
};
var c=function(l){var k=$("body").hasClass("isTablet"),j=$("body").hasClass("mobile"),m="",n="40%";
if(k){m=(($(document).outerWidth()-334)/2)+"px"
}if(j||($("body").width()<768)){n="35%"
}$.modal(l,{position:[n,m],overlayId:"disclaimer-simplemodal-overlay",containerId:"disclaimer-simplemodal-container","closeClass ":"disclaimer-simplemodal-close",overlayClose:"true",opacity:"60",})
}
};
Subaru.Disclaimer.UIManager=function(b){var a=b;
this.initialize=function(){var d=$("body");
var c=$(".disclaimer");
a.createDisclaimer(c);
d.on("click",".disclaimer",$.proxy(a.showSpecificDisclaimer,a));
d.on("disclaimerInserted",$.proxy(a.createDisclaimerDynamically,a));
d.on("resetDisclaimers",$.proxy(a.reset,a))
}
};
Subaru.legalShowHideHelper.Listener=function(){this.initialize=function(a,b){$(a).on("click",function(d){d.preventDefault();
var c=$(b);
$(c).toggle();
$(this).toggleClass("active")
})
}
};
Subaru.legalShowHideHelper.AppManager=function(){this.initialize=function(){var a=new Subaru.legalShowHideHelper.Listener();
a.initialize()
}
};
$(document).ready(function(){var a=new Subaru.Disclaimer.Manager();
a.initialize();
var b=new Subaru.legalShowHideHelper.Listener();
b.initialize(".legal",".legal-disclaimer-body")
});